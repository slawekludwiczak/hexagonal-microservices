<!DOCTYPE html>
<html lang="en" xmlns:th="https://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Products Management</title>
    <link th:href="@{/css/main.css}" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js"></script>
</head>
<body>
<div class="flex flex-col items-center">
    <h1 th:text="${id}"
        class="text-8xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-600 mb-8">
        http://olx.pl/asdf
    </h1>

    <div class="w-6/12">
        <canvas id="chart"></canvas>
    </div>

    <a type="button"
            class="inline-flex text-white bg-primary-600 hover:bg-primary-800 focus:ring-4 focus:outline-none focus:ring-primary-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:focus:ring-primary-900 my-4">
        Back
    </a>
</div>

<script th:inline="javascript">
    const history = [[${history}]];
    let map = new Map(Object.entries(history));
    map = new Map([...map.entries()].sort());

    let chart = new Chart("chart", {
        type: "line",
        data: {
            labels: Array.from(map.keys()).map(lab => lab.substring(1, 16)),
            datasets: [{
                label: 'Historia ceny',
                fill: false,
                lineTension: 0,
                backgroundColor: "rgba(0,0,255,1.0)",
                borderColor: "rgba(0,0,255,0.1)",
                data: Array.from(map.values())
            }]
        },
        options: {
            responsive: true,
            plugins: {
                legend: {
                    position: 'top',
                },
            }
        }
    });
</script>
</body>
</html>
